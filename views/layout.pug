doctype html
//Copyrights ngendlio@gmail.com
// akimanaja17@gmail.com)
html(lang="en" ng-app="eshuri_App")
  head
    meta(charset="utf-8")
    meta(name="viewport", content="width=device-width, initial-scale=1.0")      
    meta(http-equiv="X-UA-Compatible", content="IE=edge,chrome=1")
    meta(name="description", content="eShuri Learning Management System")
    if typeof csrf_token !== 'undefined' && typeof _csrf !== 'undefined'
      meta(name="#{csrf_token}", content=_csrf)
    title #{title} @ eShuri.rw
    if typeof access_lvl !== 'undefined'
      - var access = access_lvl
    link(rel="shortcut icon", href="/favicon.png")
    
    // Base CSS - Always loaded
    link(rel='stylesheet', href='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css')
    link(rel="stylesheet", type="text/css", href="../css/ionicons.min.css")
    link(rel="stylesheet", type="text/css", href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Material+Icons")
    link(rel="stylesheet", type="text/css", href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css")
    
    // Conditional CSS - Loaded based on page needs
    block css_code
      //- Default CSS for most pages
      link(rel="stylesheet", type="text/css", href="../css/monStyle.css?v=1.2.0")
      link(rel="stylesheet", type="text/css", href="../js/summernote/font-awesome.min.css")
      link(rel="stylesheet", type="text/css", href="../js/summernote/summernote.css")
      link(rel="stylesheet", type="text/css", href="../js/select/select.css")
      link(rel="stylesheet", type="text/css", href="../mycss/select2-3.4.5.css")
      link(rel="stylesheet", type="text/css", href="../mycss/selectize.default-0.8.5.css")
      link(rel="stylesheet", type="text/css", href="../css/css_css.css")
      link(rel="stylesheet", type="text/css", href="../css/report_table.css")
    
    // Additional page-specific styles
    block styles
    
  body.ng-cloak
    block content
      include partials/header
    
    // Core JS Libraries - Always loaded
    script(src='https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js')
    script(src='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js')
    
    // AngularJS - Load from CDN as backup
    script(src='https://ajax.googleapis.com/ajax/libs/angularjs/1.8.2/angular.min.js')
    script(src='https://ajax.googleapis.com/ajax/libs/angularjs/1.8.2/angular-route.min.js')
    script(src='https://ajax.googleapis.com/ajax/libs/angularjs/1.8.2/angular-sanitize.min.js')
    
    // Try to load local AngularJS files (if they exist)
    script.
      // Fallback check for Angular
      if (typeof angular === 'undefined') {
        console.error('❌ AngularJS failed to load from CDN');
      } else {
        console.log('✅ AngularJS loaded successfully from CDN');
      }
    
    // Common utilities (only if files exist locally)
    script(src='../js/homejs/ngStorage.js', type='text/javascript', onerror="console.warn('ngStorage.js not found')")
    script(src="../js/dirpagination.js", type="application/javascript", onerror="console.warn('dirpagination.js not found')")
    
    // Conditional JS - Loaded based on page needs
    block scripts
      //- Default scripts for most pages
      script(src="../js/MIT/jquery.tagsinput.js", type="text/javascript")
      script(src="../js/MIT/bootstrap-notify.js", type="application/javascript")
      script(src="../js/summernote/summernote.js", type="text/javascript")
      script(src="../js/summernote/angular-summernote.min.js", type="text/javascript")
      script(src="../js/typeahead.bundle.min.js", type="text/javascript")
      script(src="../js/bootstrap-tokenfield.min.js", type="text/javascript")
      script(src="../js/MIT/MIT_Dashboard.js", type="text/javascript")
      script(src="../js/MIT/MIT_Dashboard2.js", type="text/javascript")
      script(src="../js/my_scripts.js", type="text/javascript")